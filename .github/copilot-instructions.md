# Learn Código - AI Coding Agent Instructions

## Project Overview
**Learn Código** is a single-page study dashboard application deployed at `dev.learncodigo.com.br` (per [CNAME](../CNAME)). It provides study time tracking, quick access to educational websites, session notes, and cloud synchronization for students.

## Architecture & Key Components

### Backend Integration
- **Supabase** is the sole backend service (database + auth)
- Credentials embedded in [index.html](../index.html): `supabaseUrl` and `supabaseKey` (publishable key only)
- Two main tables: `usuarios` (username, password) and `estudos` (study sessions with timing, notes, dates)
- All data is user-scoped by the `currentUser` variable after login

### Data Flow
1. **Login**: Username/password queries `usuarios` table → sets `currentUser` → displays study workspace
2. **Study Timer**: Increments `seconds` every 1000ms, displays formatted `HH:MM:SS`, syncs to progress bar toward 6-hour daily goal
3. **Save Session**: Captures timer, notes, and date → inserts into `estudos` table → resets timer
4. **History**: Fetches all sessions for current user ordered descending, displays with delete button

### UI Patterns
- **Two-panel layout**: Sidebar nav + main content area
- **CSS variables** for dark/light mode: `--bg`, `--sidebar-bg`, `--card-bg`, `--text`, `--accent` (#00d2ff)
- **Responsive**: CSS Grid for site shortcuts (2 columns), flexbox for layout stacking on mobile (<768px)
- **Quick-link buttons**: Hard-coded shortcuts to ChatGPT, Gemini, Resposta Certa, etc. with inline background colors

## Critical Workflows

### Adding New Features
1. Timer logic: Modify `startTimer()`, `pauseTimer()`, or `updateUI()` functions
2. Database operations: Use `_supabase.from(tableName).action()` pattern; always filter by `currentUser`
3. UI updates: Modify inline HTML or CSS variable values for theming consistency
4. Cloud sync: Any data save must call `saveToCloud()` and follow `{ usuario, data, tempo, resumo }` schema

### Debugging
- Timer/UI mismatches: Check `seconds` variable and `updateUI()` calculation
- Supabase errors: Verify table structure and user context (currentUser must be set)
- Theme toggle: `toggleTheme()` adds/removes `dark-mode` class on body
- History not loading: Confirm user is logged in and `currentUser` is not empty string

## Project-Specific Conventions

- **Hardcoded credentials**: Publishable Supabase key is intentionally in client (safe for frontend-only DB rules)
- **Single HTML file**: No build process; all JS/CSS inline for simplicity
- **Portuguese UI**: All labels and placeholders in Portuguese (pt-br)
- **24-hour goal**: 6 hours (21600 seconds) is the daily study target; progress bar caps at 100%
- **Session metadata**: Always save `{ usuario, data, tempo, resumo }` with `toLocaleDateString('pt-br')` format

## Common Integration Points

| Component | Location | Purpose |
|-----------|----------|---------|
| Timer display | `#main-timer` | Shows HH:MM:SS; updated by `updateUI()` |
| Progress bar | `#meta-bar` | Visual representation of 6h goal progress |
| History list | `#history-display` | Dynamic session list; regenerated by `loadHistory()` |
| Quick links | Site grid buttons | Hard-coded external URLs with `target="_blank"` |
| Supabase client | `_supabase` global | All DB queries; initialized with URL and key |

## Before Making Changes
- Preserve the single-file structure unless modifying deployment strategy
- Test both login and post-login workflows after auth changes
- Verify dark mode CSS variable coverage if adding new UI elements
- Ensure any new Supabase queries include `.eq('usuario', currentUser)` for data isolation
