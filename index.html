<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Learn C칩digo - Estudo Pro</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; --danger: #f43f5e; }
        body { margin: 0; font-family: sans-serif; background: var(--bg); color: white; display: flex; height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 240px; background: #020617; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .nav-btn { background: none; border: none; color: #94a3b8; padding: 12px; text-align: left; cursor: pointer; border-radius: 8px; font-size: 16px; }
        .nav-btn.active { background: var(--accent); color: #000; font-weight: bold; }

        /* Conte칰do */
        .main { flex: 1; padding: 30px; overflow-y: auto; }
        .tab { display: none; }
        .tab.active { display: block; }
        
        /* O CALEND츼RIO - For칞ando cores vis칤veis */
        #calendar-box { 
            background: white !important; /* Fundo branco para n칚o ter erro */
            color: #333 !important; 
            padding: 20px; 
            border-radius: 12px; 
            min-height: 600px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        
        /* Ajuste de texto dentro do calend치rio */
        .fc { color: #333 !important; }
        .fc-toolbar-title { color: #333 !important; }
        .fc-daygrid-day-number { color: #333 !important; text-decoration: none !important; }

        .btn-add { background: var(--accent); color: black; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

    <nav class="sidebar">
        <h2 style="color: var(--accent); margin-bottom: 20px;">Learn C칩digo</h2>
        <button class="nav-btn active" onclick="showTab('dash', this)">游 Dashboard</button>
        <button class="nav-btn" id="cal-trigger" onclick="showTab('cal', this)">游늰 Calend치rio</button>
        <button class="nav-btn" onclick="location.reload()">游댃 Resetar App</button>
    </nav>

    <main class="main">
        <div id="dash" class="tab active">
            <h1>Bons estudos! 游</h1>
            <p>Clique em "Calend치rio" para organizar seus prazos.</p>
        </div>

        <div id="cal" class="tab">
            <button class="btn-add" onclick="addEventManual()">+ Adicionar Data Importante</button>
            <div id="calendar-box">
                <div id="calendar"></div>
            </div>
        </div>
    </main>

    <script>
        let calendar;
        const storageKey = 'learn_calendar_events';

        // Inicializa o calend치rio assim que a p치gina carregar, mas n칚o renderiza ainda
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'pt-br',
                headerToolbar: { left: 'prev,next today', center: 'title', right: 'dayGridMonth' },
                events: JSON.parse(localStorage.getItem(storageKey) || '[]'),
                
                // ADICIONAR: Clique no dia
                dateClick: function(info) {
                    let title = prompt("O que voc칡 tem para o dia " + info.dateStr + "?");
                    if (title) {
                        calendar.addEvent({ title: title, start: info.dateStr, allDay: true });
                        save();
                    }
                },
                
                // APAGAR: Clique no evento
                eventClick: function(info) {
                    if (confirm("Deseja apagar: " + info.event.title + "?")) {
                        info.event.remove();
                        save();
                    }
                }
            });
        });

        function showTab(id, btn) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');

            if (id === 'cal') {
                // O segredo est치 aqui: esperar o navegador mostrar a div para desenhar o calend치rio
                setTimeout(() => { 
                    calendar.render(); 
                    calendar.updateSize(); 
                }, 100);
            }
        }

        function addEventManual() {
            let title = prompt("T칤tulo do evento:");
            let data = prompt("Data (formato: AAAA-MM-DD):", new Date().toISOString().split('T')[0]);
            if (title && data) {
                calendar.addEvent({ title: title, start: data, allDay: true });
                save();
            }
        }

        function save() {
            const evs = calendar.getEvents().map(e => ({ title: e.title, start: e.startStr, allDay: e.allDay }));
            localStorage.setItem(storageKey, JSON.stringify(evs));
        }
    </script>
</body>
</html>