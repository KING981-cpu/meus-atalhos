<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Código - Workspace Pro</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --bg: #0f172a; 
            --sidebar-bg: #020617; 
            --accent: #0ea5e9; 
            --text: #f8fafc;
            --danger: #f43f5e;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* --- SIDEBAR PADRONIZADA --- */
        .sidebar { 
            width: 260px; 
            background: var(--sidebar-bg); 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            border-right: 1px solid #1e293b;
            gap: 10px; /* Espaço igual entre botões */
        }

        .sidebar h2 { color: var(--accent); margin-bottom: 30px; padding-left: 10px; }

        /* Botões Laterais - Todos idênticos em tamanho */
        .nav-btn { 
            width: 100%; /* Comprimento total da sidebar */
            height: 50px; /* Altura fixa */
            background: rgba(255, 255, 255, 0.05); 
            border: none; 
            color: #94a3b8; 
            padding: 0 20px; 
            border-radius: 8px; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            font-size: 15px;
            transition: 0.2s;
            text-align: left;
        }

        .nav-btn i { width: 20px; text-align: center; } /* Alinha os ícones verticalmente */

        .nav-btn:hover { background: #1e293b; color: white; }
        .nav-btn.active { background: var(--accent); color: white; font-weight: bold; }

        .btn-logout { margin-top: auto; color: var(--danger); }

        /* --- ÁREA DE CONTEÚDO --- */
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* --- CALENDÁRIO --- */
        #calendar-container { 
            background: white; /* Fundo branco para garantir que as letras pretas apareçam */
            border-radius: 12px; 
            padding: 20px; 
            min-height: 650px; 
            color: #333;
        }
        .fc { color: #333 !important; }

        .card { background: #1e293b; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
        .btn-add-plan { background: var(--accent); border: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; cursor: pointer; margin-bottom: 15px; }

    </style>
</head>
<body>

    <aside class="sidebar">
        <h2>Learn Código</h2>
        <button class="nav-btn active" onclick="switchTab('dash', this)">
            <i class="fas fa-home"></i> Dashboard
        </button>
        <button class="nav-btn" onclick="switchTab('cal', this)">
            <i class="fas fa-calendar-alt"></i> Calendário
        </button>
        <button class="nav-btn" onclick="switchTab('tasks', this)">
            <i class="fas fa-tasks"></i> Tarefas
        </button>
        
        <button class="nav-btn btn-logout" onclick="location.reload()">
            <i class="fas fa-sign-out-alt"></i> Sair
        </button>
    </aside>

    <main class="main-content">
        
        <div id="dash" class="tab-content active">
            <div class="card">
                <h1>Bem-vindo ao seu Workspace</h1>
                <p>Tudo pronto para os estudos de hoje.</p>
            </div>
        </div>

        <div id="cal" class="tab-content">
            <button class="btn-add-plan" onclick="manualAdd()">+ Adicionar Plano</button>
            <div id="calendar-container">
                <div id="calendar"></div>
            </div>
        </div>

        <div id="tasks" class="tab-content">
            <div class="card">
                <h2>Suas Tarefas</h2>
                <p>Aqui você pode listar o que fazer hoje.</p>
            </div>
        </div>

    </main>

    <script>
        let calendar;

        // Inicializa o calendário assim que a página abre
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'pt-br',
                events: JSON.parse(localStorage.getItem('my_events') || '[]'),
                dateClick: function(info) {
                    let t = prompt("Compromisso para " + info.dateStr + ":");
                    if(t) {
                        calendar.addEvent({ title: t, start: info.dateStr, allDay: true });
                        save();
                    }
                },
                eventClick: function(info) {
                    if(confirm("Excluir: " + info.event.title + "?")) {
                        info.event.remove();
                        save();
                    }
                }
            });
        });

        // Função para trocar de aba e forçar o calendário a aparecer
        function switchTab(id, btn) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));

            document.getElementById(id).classList.add('active');
            btn.classList.add('active');

            if(id === 'cal') {
                setTimeout(() => {
                    calendar.render();
                    calendar.updateSize();
                }, 50);
            }
        }

        function save() {
            const evs = calendar.getEvents().map(e => ({ title: e.title, start: e.startStr, allDay: e.allDay }));
            localStorage.setItem('my_events', JSON.stringify(evs));
        }

        function manualAdd() {
            let t = prompt("Título:");
            let d = prompt("Data (AAAA-MM-DD):");
            if(t && d) {
                calendar.addEvent({ title: t, start: d, allDay: true });
                save();
            }
        }
    </script>
</body>
</html>